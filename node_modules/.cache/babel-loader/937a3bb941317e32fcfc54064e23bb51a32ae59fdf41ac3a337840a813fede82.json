{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref, watchEffect } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useHouseStore } from '@/stores/store'; // keep as you had it\n\nexport default {\n  __name: 'HouseDetails',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const houseStore = useHouseStore();\n    const houseDetails = ref(null);\n    const isLoading = ref(true);\n    const fetchData = async () => {\n      // if no id in params, bail out early\n      const idParam = route.params.id;\n      if (!idParam) {\n        houseDetails.value = null;\n        isLoading.value = false;\n        return;\n      }\n      isLoading.value = true;\n      console.log('isLoading :', isLoading.value);\n      try {\n        // ensure houses are loaded (your store should handle caching if needed)\n        await houseStore.getHouses();\n        console.log('Fetched houses:', houseStore.houses);\n        const id = parseInt(idParam, 10);\n        const found = houseStore.houses.find(h => h.id === id);\n        if (found) {\n          houseDetails.value = found;\n          console.log('Found house:', houseDetails.value);\n        } else {\n          console.error(`House with ID ${idParam} not found.`);\n          houseDetails.value = null;\n          // optional: redirect back to list if not found\n          // router.replace({ name: 'HousesList' });\n        }\n      } catch (err) {\n        console.error('Error while fetching houses:', err);\n        houseDetails.value = null;\n      } finally {\n        isLoading.value = false;\n        console.log('isLoading :', isLoading.value);\n      }\n    };\n\n    // re-run fetch when route.params.id changes\n    watchEffect(() => {\n      // watchEffect will re-run when route.params.id changes because route is reactive\n      fetchData();\n    });\n    const __returned__ = {\n      route,\n      router,\n      houseStore,\n      houseDetails,\n      isLoading,\n      fetchData,\n      ref,\n      watchEffect,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useHouseStore() {\n        return useHouseStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watchEffect","useRoute","useRouter","useHouseStore","route","router","houseStore","houseDetails","isLoading","fetchData","idParam","params","id","value","console","log","getHouses","houses","parseInt","found","find","h","error","err"],"sources":["/home/kisa/dtt assessment/house-listings/src/views/HouseDetails.vue"],"sourcesContent":["<template>\n    <div class=\"house-details\">\n      <!-- show loader or fallback while fetching -->\n      <article class=\"main-house-card\" v-if=\"houseDetails\">\n        <img\n          class=\"house-card-image\"\n          :src=\"houseDetails.image\"\n          alt=\"House\"\n        />\n        <div class=\"house-card-info\">\n          <h3 class=\"house-card-title\">\n            {{ houseDetails.location.street }} {{ houseDetails.location.houseNumber }}\n          </h3>\n  \n          <p class=\"house-card-price\">â‚¬ {{ houseDetails.price }}</p>\n          <p class=\"house-card-address\">\n            {{ houseDetails.location.zip }} {{ houseDetails.location.city }}\n          </p>\n  \n          <p class=\"house-card-meta\">\n            <span class=\"meta-item\">\n              <img src=\"../assets/ic_bed@3x.png\" alt=\"Bed\" />\n              {{ houseDetails.rooms.bedrooms }}\n            </span>\n  \n            <span class=\"meta-item\">\n              <img src=\"../assets/ic_bath@3x.png\" alt=\"Bath\" />\n              {{ houseDetails.rooms.bathrooms }}\n            </span>\n  \n            <span class=\"meta-item\">\n              <img src=\"../assets/ic_size@3x.png\" alt=\"Size\" />\n              {{ houseDetails.size }} m2\n            </span>\n          </p>\n        </div>\n      </article>\n  \n      <div v-else class=\"main-house-card --loading\">\n        Loading house...\n      </div>\n  \n      <div class=\"recommended-houses\">Im Recommended!</div>\n    </div>\n  </template>\n  \n  <script setup>\n  import { ref, watchEffect } from 'vue';\n  import { useRoute, useRouter } from 'vue-router';\n  import { useHouseStore } from '@/stores/store'; // keep as you had it\n  \n  const route = useRoute();\n  const router = useRouter();\n  const houseStore = useHouseStore();\n  \n  const houseDetails = ref(null);\n  const isLoading = ref(true);\n  \n  const fetchData = async () => {\n    // if no id in params, bail out early\n    const idParam = route.params.id;\n    if (!idParam) {\n      houseDetails.value = null;\n      isLoading.value = false;\n      return;\n    }\n  \n    isLoading.value = true;\n    console.log('isLoading :', isLoading.value);\n    try {\n      // ensure houses are loaded (your store should handle caching if needed)\n      await houseStore.getHouses();\n      console.log('Fetched houses:', houseStore.houses);\n  \n      const id = parseInt(idParam, 10);\n      const found = houseStore.houses.find((h) => h.id === id);\n  \n      if (found) {\n        houseDetails.value = found;\n        console.log('Found house:', houseDetails.value);\n      } else {\n        console.error(`House with ID ${idParam} not found.`);\n        houseDetails.value = null;\n        // optional: redirect back to list if not found\n        // router.replace({ name: 'HousesList' });\n      }\n    } catch (err) {\n      console.error('Error while fetching houses:', err);\n      houseDetails.value = null;\n    } finally {\n      isLoading.value = false;\n      console.log('isLoading :', isLoading.value);\n    }\n  };\n  \n  // re-run fetch when route.params.id changes\n  watchEffect(() => {\n    // watchEffect will re-run when route.params.id changes because route is reactive\n    fetchData();\n  });\n  </script>\n  "],"mappings":";;AA+CE,SAASA,GAAG,EAAEC,WAAW,QAAQ,KAAK;AACtC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,SAASC,aAAa,QAAQ,gBAAgB,CAAC,CAAC;;;;;;;;IAEhD,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,MAAMI,MAAM,GAAGH,SAAS,CAAC,CAAC;IAC1B,MAAMI,UAAU,GAAGH,aAAa,CAAC,CAAC;IAElC,MAAMI,YAAY,GAAGR,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMS,SAAS,GAAGT,GAAG,CAAC,IAAI,CAAC;IAE3B,MAAMU,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B;MACA,MAAMC,OAAO,GAAGN,KAAK,CAACO,MAAM,CAACC,EAAE;MAC/B,IAAI,CAACF,OAAO,EAAE;QACZH,YAAY,CAACM,KAAK,GAAG,IAAI;QACzBL,SAAS,CAACK,KAAK,GAAG,KAAK;QACvB;MACF;MAEAL,SAAS,CAACK,KAAK,GAAG,IAAI;MACtBC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEP,SAAS,CAACK,KAAK,CAAC;MAC3C,IAAI;QACF;QACA,MAAMP,UAAU,CAACU,SAAS,CAAC,CAAC;QAC5BF,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAET,UAAU,CAACW,MAAM,CAAC;QAEjD,MAAML,EAAE,GAAGM,QAAQ,CAACR,OAAO,EAAE,EAAE,CAAC;QAChC,MAAMS,KAAK,GAAGb,UAAU,CAACW,MAAM,CAACG,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACT,EAAE,KAAKA,EAAE,CAAC;QAExD,IAAIO,KAAK,EAAE;UACTZ,YAAY,CAACM,KAAK,GAAGM,KAAK;UAC1BL,OAAO,CAACC,GAAG,CAAC,cAAc,EAAER,YAAY,CAACM,KAAK,CAAC;QACjD,CAAC,MAAM;UACLC,OAAO,CAACQ,KAAK,CAAC,iBAAiBZ,OAAO,aAAa,CAAC;UACpDH,YAAY,CAACM,KAAK,GAAG,IAAI;UACzB;UACA;QACF;MACF,CAAC,CAAC,OAAOU,GAAG,EAAE;QACZT,OAAO,CAACQ,KAAK,CAAC,8BAA8B,EAAEC,GAAG,CAAC;QAClDhB,YAAY,CAACM,KAAK,GAAG,IAAI;MAC3B,CAAC,SAAS;QACRL,SAAS,CAACK,KAAK,GAAG,KAAK;QACvBC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEP,SAAS,CAACK,KAAK,CAAC;MAC7C;IACF,CAAC;;IAED;IACAb,WAAW,CAAC,MAAM;MAChB;MACAS,SAAS,CAAC,CAAC;IACb,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}