{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from '@/stores/store';\nimport ModalComponent from '@/components/ModalComponent.vue';\nexport default {\n  __name: 'HouseDetailsView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const store = useStore();\n    const houseDetails = ref(null);\n    const isLoading = ref(true);\n    const showModal = ref(route.query.delete === \"true\");\n    const recommendations = ref([]);\n    const fetchData = async id => {\n      isLoading.value = true;\n      try {\n        // Load houses once (store can cache internally)\n        await store.getHouses();\n        const currentHouse = store.houses.find(h => h.id === id);\n        if (!currentHouse) {\n          houseDetails.value = null;\n          recommendations.value = [];\n          return;\n        }\n        houseDetails.value = currentHouse;\n        recommendations.value = store.houses.filter(h => h.id !== id).map(h => ({\n          ...h,\n          priceDiff: Math.abs(currentHouse.price - h.price)\n        })).sort((a, b) => a.priceDiff - b.priceDiff).slice(0, 3);\n      } catch (err) {\n        console.error('Error while fetching house:', err);\n        houseDetails.value = null;\n        recommendations.value = [];\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    watch(() => route.params.id, id => {\n      if (!id) return;\n      fetchData(Number(id));\n    }, {\n      immediate: true\n    });\n    const navigateToHouseDetails = houseId => {\n      router.push({\n        name: 'HouseDetailsView',\n        params: {\n          id: houseId\n        }\n      });\n    };\n    const __returned__ = {\n      route,\n      router,\n      store,\n      houseDetails,\n      isLoading,\n      showModal,\n      recommendations,\n      fetchData,\n      navigateToHouseDetails,\n      ref,\n      watch,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      ModalComponent\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","useRoute","useRouter","useStore","ModalComponent","route","router","store","houseDetails","isLoading","showModal","query","delete","recommendations","fetchData","id","value","getHouses","currentHouse","houses","find","h","filter","map","priceDiff","Math","abs","price","sort","a","b","slice","err","console","error","params","Number","immediate","navigateToHouseDetails","houseId","push","name"],"sources":["/home/kisa/dtt assessment/house-listings/src/views/HouseDetailsView.vue"],"sourcesContent":["<template>\n\n    <div class=\"house-details main\">\n    <!-- Loader -->\n    <div v-if=\"isLoading\" class=\"main-house-card --loading\">\n      Loading house...\n    </div>\n\n    <!-- Error / not found -->\n    <div v-else-if=\"!houseDetails\" class=\"main-house-card --loading\">\n      House not found\n    </div>\n\n    <!-- Only render when data exists -->\n    <article v-else class=\"main-house-card\">\n\n    <router-link to=\"/\" class=\"btn btn-back\">\n      <picture>\n          <!-- Small devices -->\n          <source srcset=\"../assets/ic_back_white@3x.png\" media=\"(max-width: 768px)\">\n          <!-- Large devices -->\n          <source srcset=\"../assets/ic_back_grey@3x.png\">\n          <img class=\"btn-back-icon\" src=\"../assets/ic_back_grey@3x.png\" alt=\"Back\">\n      </picture> \n      <span class=\"btn-back-label\">Back to overview</span>\n    </router-link>\n\n    <!-- Small devices -->\n    <div class=\"house-actions-sm\" v-if=\"houseDetails?.madeByMe\">\n      <router-link\n        :to=\"{ name: 'HouseEditView', params: { id: $route.params.id }}\"\n        class=\"btn btn-edit\">\n          <img class=\"btn-edit-icon\" src=\"../assets/ic_edit_white@3x.png\" alt=\"Edit\" />\n      </router-link>\n\n      <button class=\"btn btn-delete\" @click=\"showModal = true\">\n          <img class=\"btn-delete-icon\" src=\"../assets/ic_delete_white@3x.png\" alt=\"Delete\" />\n      </button>\n    </div>\n\n      <img\n        class=\"main-house-card-image\"\n        :src=\"houseDetails?.image\"\n        alt=\"House\"\n      />\n\n      <div class=\"main-house-card-info\">\n        <div class=\"main-house-card-header\">\n          <h3 class=\"main-house-card-title\">\n            {{ houseDetails?.location?.street }} {{ houseDetails?.location?.houseNumber }}\n          </h3>\n\n          <!-- Large devices -->\n          <div class=\"house-actions\" v-if=\"houseDetails?.madeByMe\">\n            <router-link\n              :to=\"{ name: 'HouseEditView', params: { id: $route.params.id }}\"\n              class=\"btn btn-edit\">\n                <img class=\"btn-edit-icon\" src=\"../assets/ic_edit@3x.png\" alt=\"Edit\" />\n            </router-link>\n\n            <button class=\"btn btn-delete\" @click=\"showModal = true\">\n                <img class=\"btn-delete-icon\" src=\"../assets/ic_delete@3x.png\" alt=\"Delete\" />\n            </button>\n          </div>\n      </div>\n\n        <p class=\"main-house-card-meta\">\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_location@3x.png\" alt=\"Location\" />\n            {{ houseDetails?.location?.zip }} {{ houseDetails?.location?.city }}\n          </span>\n        </p>\n\n        <p class=\"main-house-card-meta\">\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_price@3x.png\" alt=\"Price\" />\n            {{ houseDetails?.price }}\n          </span>\n\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_size@3x.png\" alt=\"Size\" />\n            {{ houseDetails?.size }} m2\n          </span>\n\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_construction_date@3x.png\" alt=\"Construction Year\" />\n            Built in {{ houseDetails?.constructionYear }}\n          </span>\n        </p>\n\n        <p class=\"main-house-card-meta\">\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_bed@3x.png\" alt=\"Bed\" />\n            {{ houseDetails?.rooms?.bedrooms }}\n          </span>\n\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_bath@3x.png\" alt=\"Bath\" />\n            {{ houseDetails?.rooms?.bathrooms }}\n          </span>\n\n          <span class=\"meta-item\">\n            <img src=\"../assets/ic_garage@3x.png\" alt=\"Garage\" />\n            {{ houseDetails?.hasGarage ? 'Yes' : 'No' }}\n          </span>\n        </p>\n        \n        <p class=\"main-house-card-description\">\n          {{ houseDetails?.description }}\n        </p>\n\n      </div>\n    </article>\n\n    <div class=\"recommended-houses\">\n      <h2>Recommended for you</h2>\n      <div v-for=\"recommendedHouse in recommendations\" :key=\"recommendedHouse.id\" class=\"recommended-house\">\n          <div class=\"recommended-card-info\" @click=\"navigateToHouseDetails(recommendedHouse.id)\">\n              <img :src=\"recommendedHouse.image\" class=\"recommended-card-info-img\" alt=\"House Image\" />\n              <div class=\"recommended-card-text\">\n                  <h3>{{ recommendedHouse.location.street }} {{ recommendedHouse.location.houseNumber }}</h3>\n                  <p>â‚¬ {{ recommendedHouse.price }} </p>\n                  <p>{{ recommendedHouse.location.zip }} {{ recommendedHouse.location.city }}</p>\n                  <p class=\"recommended-house-meta\">\n                    <span class=\"meta-item\">\n                      <img src=\"../assets/ic_bed@3x.png\" alt=\"Bed\" /> {{ recommendedHouse.rooms.bedrooms }}\n                    </span> \n                    <span class=\"meta-item\">\n                      <img src=\"../assets/ic_bath@3x.png\" alt=\"Bath\" /> {{ recommendedHouse.rooms.bathrooms }}\n                    </span>\n                    <span class=\"meta-item\">\n                      <img src=\"../assets/ic_size@3x.png\" alt=\"Size\" /> {{ recommendedHouse.size }} m2\n                    </span>\n                  </p>\n              </div>\n          </div>\n      </div>\n    </div>\n    <ModalComponent v-if=\"showModal\" :house=\"houseDetails\" @close=\"showModal = false\"/>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from '@/stores/store'\nimport ModalComponent from '@/components/ModalComponent.vue'\n\nconst route = useRoute()\nconst router = useRouter()\nconst store = useStore()\n\nconst houseDetails = ref(null)\nconst isLoading = ref(true)\nconst showModal = ref(route.query.delete === \"true\");\nconst recommendations = ref([]);\n\n\nconst fetchData = async (id) => {\n  isLoading.value = true\n\n  try {\n    // Load houses once (store can cache internally)\n    await store.getHouses()\n\n    const currentHouse = store.houses.find(h => h.id === id)\n    if (!currentHouse) {\n      houseDetails.value = null\n      recommendations.value = []\n      return\n    }\n\n    houseDetails.value = currentHouse\n\n    recommendations.value = store.houses\n      .filter(h => h.id !== id)\n      .map(h => ({\n        ...h,\n        priceDiff: Math.abs(currentHouse.price - h.price)\n      }))\n      .sort((a, b) => a.priceDiff - b.priceDiff)\n      .slice(0, 3)\n\n  } catch (err) {\n    console.error('Error while fetching house:', err)\n    houseDetails.value = null\n    recommendations.value = []\n  } finally {\n    isLoading.value = false\n  }\n}\n\nwatch(\n  () => route.params.id,\n  (id) => {\n    if (!id) return\n    fetchData(Number(id))\n  },\n  { immediate: true }\n)\n\nconst navigateToHouseDetails = (houseId) => {\n    router.push({ name: 'HouseDetailsView', params: { id: houseId } });\n};\n\n</script>\n"],"mappings":";;;;;AA+IA,SAASA,GAAG,EAAEC,KAAK,QAAQ,KAAI;AAC/B,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAW;AAC/C,SAASC,QAAQ,QAAQ,gBAAe;AACxC,OAAOC,cAAc,MAAM,iCAAgC;;;;;;;IAE3D,MAAMC,KAAK,GAAGJ,QAAQ,CAAC;IACvB,MAAMK,MAAM,GAAGJ,SAAS,CAAC;IACzB,MAAMK,KAAK,GAAGJ,QAAQ,CAAC;IAEvB,MAAMK,YAAY,GAAGT,GAAG,CAAC,IAAI;IAC7B,MAAMU,SAAS,GAAGV,GAAG,CAAC,IAAI;IAC1B,MAAMW,SAAS,GAAGX,GAAG,CAACM,KAAK,CAACM,KAAK,CAACC,MAAM,KAAK,MAAM,CAAC;IACpD,MAAMC,eAAe,GAAGd,GAAG,CAAC,EAAE,CAAC;IAG/B,MAAMe,SAAS,GAAG,MAAOC,EAAE,IAAK;MAC9BN,SAAS,CAACO,KAAK,GAAG,IAAG;MAErB,IAAI;QACF;QACA,MAAMT,KAAK,CAACU,SAAS,CAAC;QAEtB,MAAMC,YAAY,GAAGX,KAAK,CAACY,MAAM,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKA,EAAE;QACvD,IAAI,CAACG,YAAY,EAAE;UACjBV,YAAY,CAACQ,KAAK,GAAG,IAAG;UACxBH,eAAe,CAACG,KAAK,GAAG,EAAC;UACzB;QACF;QAEAR,YAAY,CAACQ,KAAK,GAAGE,YAAW;QAEhCL,eAAe,CAACG,KAAK,GAAGT,KAAK,CAACY,MAAK,CAChCG,MAAM,CAACD,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKA,EAAE,EACvBQ,GAAG,CAACF,CAAC,KAAK;UACT,GAAGA,CAAC;UACJG,SAAS,EAAEC,IAAI,CAACC,GAAG,CAACR,YAAY,CAACS,KAAK,GAAGN,CAAC,CAACM,KAAK;QAClD,CAAC,CAAC,EACDC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACL,SAAS,GAAGM,CAAC,CAACN,SAAS,EACxCO,KAAK,CAAC,CAAC,EAAE,CAAC;MAEf,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEF,GAAG;QAChDxB,YAAY,CAACQ,KAAK,GAAG,IAAG;QACxBH,eAAe,CAACG,KAAK,GAAG,EAAC;MAC3B,CAAC,SAAS;QACRP,SAAS,CAACO,KAAK,GAAG,KAAI;MACxB;IACF;IAEAhB,KAAK,CACH,MAAMK,KAAK,CAAC8B,MAAM,CAACpB,EAAE,EACpBA,EAAE,IAAK;MACN,IAAI,CAACA,EAAE,EAAE;MACTD,SAAS,CAACsB,MAAM,CAACrB,EAAE,CAAC;IACtB,CAAC,EACD;MAAEsB,SAAS,EAAE;IAAK,CACpB;IAEA,MAAMC,sBAAsB,GAAIC,OAAO,IAAK;MACxCjC,MAAM,CAACkC,IAAI,CAAC;QAAEC,IAAI,EAAE,kBAAkB;QAAEN,MAAM,EAAE;UAAEpB,EAAE,EAAEwB;QAAQ;MAAE,CAAC,CAAC;IACtE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}