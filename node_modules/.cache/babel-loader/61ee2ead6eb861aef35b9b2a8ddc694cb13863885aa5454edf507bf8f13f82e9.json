{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onBeforeMount, onUnmounted } from 'vue';\nimport { useStore } from '@/stores/store';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'HouseCreateView',\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    const form = ref({\n      location: {\n        street: '',\n        houseNumber: '',\n        houseNumberAddition: '',\n        zip: '',\n        city: ''\n      },\n      price: '',\n      size: '',\n      hasGarage: '',\n      rooms: {\n        bedrooms: '',\n        bathrooms: ''\n      },\n      constructionYear: '',\n      description: ''\n    });\n    const image = ref(null);\n    const imageWrapper = ref(null);\n    const isSubmitting = ref(false);\n    const currentYear = new Date().getFullYear();\n    const handleImageChange = e => {\n      image.value = e.target.files[0];\n      if (image.value && imageWrapper.value) {\n        imageWrapper.value.style.backgroundImage = `url(${URL.createObjectURL(image.value)})`;\n        imageWrapper.value.style.backgroundSize = 'cover';\n      }\n    };\n    const clearImage = () => {\n      image.value = null;\n      if (imageWrapper.value) {\n        imageWrapper.value.style.backgroundImage = '';\n      }\n    };\n    const handleSubmit = async () => {\n      isSubmitting.value = true;\n      try {\n        const data = new FormData();\n        data.append('price', form.value.price);\n        data.append('bedrooms', form.value.rooms.bedrooms);\n        data.append('bathrooms', form.value.rooms.bathrooms);\n        data.append('size', form.value.size);\n        data.append('streetName', form.value.location.street);\n        data.append('houseNumber', form.value.location.houseNumber);\n        data.append('numberAddition', form.value.location.houseNumberAddition);\n        data.append('zip', form.value.location.zip);\n        data.append('city', form.value.location.city);\n        data.append('constructionYear', form.value.constructionYear);\n        data.append('hasGarage', String(form.value.hasGarage));\n        data.append('description', form.value.description);\n        const imageData = new FormData();\n        imageData.append('image', image.value);\n        const createdHouse = await store.addHouse(data, imageData);\n        router.push({\n          name: 'HouseDetailsView',\n          params: {\n            id: createdHouse.id\n          }\n        });\n      } catch (err) {\n        console.error('Create house failed:', err);\n      } finally {\n        isSubmitting.value = false;\n      }\n    };\n    onBeforeMount(() => {\n      document.getElementById('main')?.classList.add('background-wrapper');\n    });\n    onUnmounted(() => {\n      document.getElementById('main')?.classList.remove('background-wrapper');\n    });\n    return {\n      form,\n      image,\n      imageWrapper,\n      handleImageChange,\n      clearImage,\n      handleSubmit,\n      currentYear,\n      isSubmitting\n    };\n  }\n};","map":{"version":3,"names":["ref","onBeforeMount","onUnmounted","useStore","useRouter","name","setup","router","store","form","location","street","houseNumber","houseNumberAddition","zip","city","price","size","hasGarage","rooms","bedrooms","bathrooms","constructionYear","description","image","imageWrapper","isSubmitting","currentYear","Date","getFullYear","handleImageChange","e","value","target","files","style","backgroundImage","URL","createObjectURL","backgroundSize","clearImage","handleSubmit","data","FormData","append","String","imageData","createdHouse","addHouse","push","params","id","err","console","error","document","getElementById","classList","add","remove"],"sources":["/home/kisa/dtt assessment/house-listings/src/views/HouseCreateView.vue"],"sourcesContent":["<template id=\"main\">\n    <div class=\"house-create\">\n        <div class=\"house-create-wrapper\">\n            <router-link to=\"/\" class=\"btn btn-edit-back\">\n            <img class=\"btn-edit-back-icon\" src=\"../assets/ic_back_grey@3x.png\" alt=\"Back\" />\n            <p class=\"back-label\">Back to overview</p>\n        </router-link>\n\n        <h1>Create new listing</h1>\n  \n        <form @submit.prevent=\"handleSubmit\">\n          <!-- STREET -->\n          <div class=\"full-size\">\n            <label>Street name*</label>\n            <input\n              type=\"text\"\n              required\n              minlength=\"2\"\n              maxlength=\"20\"\n              v-model=\"form.location.street\"\n              placeholder=\"Enter the street name\"\n            />\n          </div>\n  \n          <!-- HOUSE NUMBER -->\n          <div class=\"half-size\">\n            <label>House number*</label>\n            <input\n              type=\"number\"\n              required\n              min=\"1\"\n              max=\"2000\"\n              v-model=\"form.location.houseNumber\"\n              placeholder=\"Enter the house number\"\n            />\n          </div>\n  \n          <!-- ADDITION -->\n          <div class=\"half-size\">\n            <label>Addition (optional)</label>\n            <input\n              type=\"text\"\n              v-model=\"form.location.houseNumberAddition\"\n              placeholder=\"e.g. A\"\n            />\n          </div>\n  \n          <!-- ZIP -->\n          <div class=\"full-size\">\n            <label>Postal code*</label>\n            <input\n              type=\"text\"\n              required\n              pattern=\"^[1-9][0-9]{3} ?(?!sa|SA|sd|SD|ss|SS)[a-zA-Z]{2}$\"\n              minlength=\"6\"\n              maxlength=\"7\"\n              v-model=\"form.location.zip\"\n              placeholder=\"e.g. 1000 AA\"\n            />\n          </div>\n  \n          <!-- CITY -->\n          <div class=\"full-size\">\n            <label>City*</label>\n            <input\n              type=\"text\"\n              required\n              minlength=\"2\"\n              maxlength=\"20\"\n              v-model=\"form.location.city\"\n              placeholder=\"e.g. Utrecht\"\n            />\n          </div>\n  \n          <!-- IMAGE -->\n          <div class=\"full-size\">\n            <label>Upload picture (PNG or JPG)*</label>\n            <div class=\"input-wrapper\" :class=\"{ 'has-image': image }\" ref=\"imageWrapper\">\n              <input\n                type=\"file\"\n                accept=\"image/png, image/jpeg\"\n                required\n                @change=\"handleImageChange\"\n              />\n              <button\n                v-if=\"image\"\n                class=\"clear-button-white\"\n                @click.prevent=\"clearImage\"\n              >\n                <img src=\"../assets/ic_clear_white@3x.png\" alt=\"Clear\" />\n              </button>\n            </div>\n          </div>\n  \n          <!-- PRICE -->\n          <div class=\"full-size\">\n            <label>Price*</label>\n            <input\n              type=\"number\"\n              required\n              min=\"300\"\n              v-model=\"form.price\"\n              placeholder=\"e.g. €150.000\"\n            />\n          </div>\n  \n          <!-- SIZE -->\n          <div class=\"half-size\">\n            <label>Size*</label>\n            <input\n              type=\"number\"\n              required\n              min=\"10\"\n              v-model=\"form.size\"\n              placeholder=\"e.g. 60m2\"\n            />\n          </div>\n  \n          <!-- GARAGE -->\n          <div class=\"half-size\">\n            <label>Garage*</label>\n            <select required v-model=\"form.hasGarage\">\n              <option disabled value=\"\">Select</option>\n              <option :value=\"true\">Yes</option>\n              <option :value=\"false\">No</option>\n            </select>\n          </div>\n  \n          <!-- ROOMS -->\n          <div class=\"half-size\">\n            <label>Bedrooms*</label>\n            <input type=\"number\" \n                required min=\"1\" \n                v-model=\"form.rooms.bedrooms\"\n                placeholder=\"Enter amount\" \n            />\n          </div>\n  \n          <div class=\"half-size\">\n            <label>Bathrooms*</label>\n            <input type=\"number\" \n                required min=\"1\" \n                v-model=\"form.rooms.bathrooms\" \n                placeholder=\"Enter amount\"\n            />\n          </div>\n  \n          <!-- YEAR -->\n          <div class=\"full-size\">\n            <label>Construction date*</label>\n            <input\n              type=\"number\"\n              required\n              min=\"1700\"\n              :max=\"currentYear\"\n              v-model=\"form.constructionYear\"\n              placeholder=\"e.g. 1990\"\n            />\n          </div>\n  \n          <!-- DESCRIPTION -->\n          <div class=\"full-size\">\n            <label>Description*</label>\n            <textarea\n              required\n              minlength=\"5\"\n              rows=\"4\"\n              v-model=\"form.description\"\n              placeholder=\"Enter description\"\n            />\n          </div>\n  \n          <div class=\"form-btn-wrapper\">\n            <button class=\"submit-form-button\">\n              {{ isSubmitting ? 'Loading…' : 'Post' }}\n            </button>\n          </div>\n        </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ref, onBeforeMount, onUnmounted } from 'vue'\nimport { useStore } from '@/stores/store'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'HouseCreateView',\n\n  setup() {\n\n    const router = useRouter()\n    const store = useStore()\n\n    const form = ref({\n      location: {\n        street: '',\n        houseNumber: '',\n        houseNumberAddition: '',\n        zip: '',\n        city: ''\n      },\n      price: '',\n      size: '',\n      hasGarage: '',\n      rooms: {\n        bedrooms: '',\n        bathrooms: ''\n      },\n      constructionYear: '',\n      description: ''\n    })\n\n    const image = ref(null)\n    const imageWrapper = ref(null)\n    const isSubmitting = ref(false)\n    const currentYear = new Date().getFullYear()\n\n    const handleImageChange = (e) => {\n      image.value = e.target.files[0]\n\n      if (image.value && imageWrapper.value) {\n        imageWrapper.value.style.backgroundImage =\n          `url(${URL.createObjectURL(image.value)})`\n        imageWrapper.value.style.backgroundSize = 'cover'\n      }\n    }\n\n    const clearImage = () => {\n      image.value = null\n      if (imageWrapper.value) {\n        imageWrapper.value.style.backgroundImage = ''\n      }\n    }\n\n    const handleSubmit = async () => {\n      isSubmitting.value = true\n\n      try {\n        const data = new FormData()\n        data.append('price', form.value.price)\n        data.append('bedrooms', form.value.rooms.bedrooms)\n        data.append('bathrooms', form.value.rooms.bathrooms)\n        data.append('size', form.value.size)\n        data.append('streetName', form.value.location.street)\n        data.append('houseNumber', form.value.location.houseNumber)\n        data.append('numberAddition', form.value.location.houseNumberAddition)\n        data.append('zip', form.value.location.zip)\n        data.append('city', form.value.location.city)\n        data.append('constructionYear', form.value.constructionYear)\n        data.append('hasGarage', String(form.value.hasGarage))\n        data.append('description', form.value.description)\n\n        const imageData = new FormData()\n        imageData.append('image', image.value)\n\n        const createdHouse = await store.addHouse(data, imageData)\n\n        router.push({\n            name: 'HouseDetailsView',\n            params: { id: createdHouse.id }\n        })\n      } catch (err) {\n        console.error('Create house failed:', err)\n      } finally {\n        isSubmitting.value = false\n      }\n    }\n\n    onBeforeMount(() => {\n      document.getElementById('main')?.classList.add('background-wrapper')\n    })\n\n    onUnmounted(() => {\n      document.getElementById('main')?.classList.remove('background-wrapper')\n    })\n\n    return {\n      form,\n      image,\n      imageWrapper,\n      handleImageChange,\n      clearImage,\n      handleSubmit,\n      currentYear,\n      isSubmitting\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}